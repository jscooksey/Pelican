<!DOCTYPE html>
<html>
  <head>
    <title>Justin Cooksey Codes</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="../theme/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Header -->
      <header id="header">
        <h1><a href="/index.html">Justin Cooksey Codes</a></h1>
        <nav class="links">
          <ul>
            <li><a href="../tag/code.html">Code</a></li>
            <li><a href="../tag/python.html">Python</a></li>
            <li><a href="../tag/rmm.html">RMM</a></li>
            <li><a href="../tag/opensource.html">Opensource</a></li>
          </ul>
        </nav>
        <nav class="main">
          <ul>
            <li class="menu">
              <a class="fa-bars" href="#menu">Menu</a>
            </li>
          </ul>
        </nav>
      </header>

      <!-- Menu -->
      <section id="menu">
        <!-- Actions -->
        <section>
          <ul class="actions stacked">
            <li><a href="../tag/code.html">Code</a></li>
            <li><a href="../tag/python.html">Python</a></li>
            <li><a href="../tag/rmm.html">RMM</a></li>
            <li><a href="../tag/opensource.html">Opensource</a></li>
          </ul>
        </section>
      </section>

      <!-- Main -->
      <div id="main"> <!-- Post -->
<article class="post">
  <header>
    <div class="title">
      <h2><a href="../blog/2023/dattormm-api.html">Datto RMM API Sites Export</a></h2>
    </div>
    <div class="meta">
      <time
        class="published"
        datetime="2023-05-29"
        >May 29, 2023</time
      >
      <a href="../author/justin-cooksey.html" class="author">
        <span class="name">Justin Cooksey</span>
        <img src="../theme/images/avatar.jpg" alt=""/>
      </a>
    </div>
  </header>
  <a href="../blog/2023/dattormm-api.html" class="image featured"
    ><img src="images/dattormm.png" alt=""
  /></a>
  <p><img src="../blog/2023/dattormm.png"  width="33%" height="33%"></p>
<p>What began as a task just to <a href="https://github.com/jscooksey/DattoRMM-Site-Export">export all Sites from a DatoRMM instance to a CSV file</a>, has started me down the path of building a module to deal with many of the DattoRMM API end points. </p>
<p>Mainly working around the REST APIs that I needed to use to perform certain tasks, I've begun refactoring the export code to become more of an API interface module which may grow to be more useful.  Other tasks may take my time away from this, but I will see were it may go.</p>
<p>The original code to export of sites is here <a href="https://github.com/jscooksey/DattoRMM-Site-Export">DattoRMM-Site-Export</a>.  Currently this code pulls all Sites from a <a href="https://www.datto.com/au/products/rmm/">DattoRMM</a> environment and exports the basic details in to CSV format file.  It removes the system sites called Managed, OnDemand &amp; Deleted Devices, so that you only get an export of the customer base.</p>
<p>Also in the repo is code to set Site variables in DattoRMM sites read in from a csv, as this was part of the next steps I needed to take.</p>
<p>Gets the API URL, Key and Secret from .env or environment variables (example below)</p>
<p>Functions to interact with the DattoRMM API are in the <a href="https://github.com/jscooksey/DattoRMM-Site-Export/blob/main/dattormmapi.py">dattormmapi.py</a> Python file.</p>
<p>Main function to do the API requests and export to CSV is in the <a href="https://github.com/jscooksey/DattoRMM-Site-Export/blob/main/export_sites.py">export_sites.py</a> Python file.</p>
<p>Refactoring to make this a more versatile module to handle interactions with the DattoRMM API will go in to a new GitHub repo, which I'll make public once its formed up some more. </p>
  <footer>
    <ul class="actions">
      <li>
        <a href="../blog/2023/dattormm-api.html" class="button large"
          >Continue Reading</a
        >
      </li>
    </ul>
    <ul class="stats">
      <li><a href="../tag/python.html">Python</a></li>
      <li><a href="../tag/code.html">Code</a></li>
      <li><a href="../tag/rmm.html">RMM</a></li>
      <li><a href="../tag/dattormm.html">DattoRMM</a></li>
      <li><a href="../tag/api.html">API</a></li>
    </ul>
  </footer>
</article>
<!-- Post -->
<article class="post">
  <header>
    <div class="title">
      <h2><a href="../blog/2021/2021-03-04-windows-server-dhcp-conversion-to-cisco-cli.html">Windows Server DHCP conversion to Cisco CLI</a></h2>
    </div>
    <div class="meta">
      <time
        class="published"
        datetime="2021-03-04"
        >Mar 4, 2021</time
      >
      <a href="../author/justin-cooksey.html" class="author">
        <span class="name">Justin Cooksey</span>
        <img src="../theme/images/avatar.jpg" alt=""/>
      </a>
    </div>
  </header>
  <a href="../blog/2021/2021-03-04-windows-server-dhcp-conversion-to-cisco-cli.html" class="image featured"
    ><img src="images/dhcp.jpg" alt=""
  /></a>
  <p><img src="../blog/2021/dhcp.jpg"  width="33%" height="33%"></p>
<p>I recently ran in to an issue where I needed to convert a reasonably large DHCP database from a Windows Server in to a Cisco CLI to allow the Cisco to take over DHCP roles for a subnet. I found nothing that realy automated this task, even using the exported XML file. So knowing that this was the second time I needed the tool, and likely to need it again, even if it was for smaller tasks, I set about coding it in Powershell. It is the scripting system well supported in Windows land.</p>
<p>The current version of the script can be found on my GitHub repository:
<a href="https://github.com/jscooksey/Convert-WindowsDHCPToCisco">Convert-WindowsDHCPToCisco</a></p>
<p>Still ha smany DHCP options that it hasn't been setup to hanle at this point but it does follow the basic ones that most of us use.</p>
<h4 id="currently-handles-dhcp-options">Currently handles DHCP Options</h4>
<table>
<thead>
<tr>
<th>Code</th>
<th>Option Description</th>
<th>Cisco Output</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>Default Gateway</td>
<td>default-router</td>
</tr>
<tr>
<td>4</td>
<td>Time Server</td>
<td><em>ignoring</em></td>
</tr>
<tr>
<td>6</td>
<td>Domain Nameserver</td>
<td>dns-server</td>
</tr>
<tr>
<td>15</td>
<td>Domain Name</td>
<td>domain-name</td>
</tr>
<tr>
<td>42</td>
<td>NTP Servers</td>
<td>option 42 ip</td>
</tr>
<tr>
<td>51</td>
<td>Lease time</td>
<td><em>ignoring</em></td>
</tr>
<tr>
<td>66</td>
<td>TFTP Server</td>
<td>next-server</td>
</tr>
<tr>
<td>67</td>
<td>Boot filename</td>
<td>bootfile</td>
</tr>
<tr>
<td>81</td>
<td>MS DHCP Name Protection</td>
<td><em>ignoring</em></td>
</tr>
<tr>
<td>121</td>
<td>Static routes</td>
<td>option 121 hex</td>
</tr>
<tr>
<td>161</td>
<td>FTP Server</td>
<td>option 161 ip</td>
</tr>
<tr>
<td>162</td>
<td>Path</td>
<td>option 162 ascii</td>
</tr>
<tr>
<td>252</td>
<td>Proxy PAC URL</td>
<td>option 252 asicc</td>
</tr>
</tbody>
</table>
<h4 id="dhcp-references-used">DHCP References Used</h4>
<ul>
<li><a href="https://tools.ietf.org/html/rfc2132">RFC2312</a></li>
<li><a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol#Client_configuration_parameters">Wikipedia DHCP Options table</a></li>
</ul>
  <footer>
    <ul class="actions">
      <li>
        <a href="../blog/2021/2021-03-04-windows-server-dhcp-conversion-to-cisco-cli.html" class="button large"
          >Continue Reading</a
        >
      </li>
    </ul>
    <ul class="stats">
      <li><a href="../tag/dhcp.html">DHCP</a></li>
      <li><a href="../tag/windows.html">Windows</a></li>
      <li><a href="../tag/powershell.html">PowerShell</a></li>
      <li><a href="../tag/cisco.html">Cisco</a></li>
    </ul>
  </footer>
</article>

<!-- Pagination -->
<ul class="actions pagination">
  <li><a href="" class="disabled button large previous">Previous Page</a></li>
   <li><a href="#" class="disabled button large next">Next Page</a></li>
</ul>
</div>
      <!-- Sidebar -->
      <section id="sidebar">
        <!-- Intro -->
        <section id="intro">
          <a href="#" class="logo"
            ><img src="../theme/images/logo.png" alt=""
          /></a>
          <header>
            <h2>Justin Cooksey Codes</h2>
            <p>Thoughts and Code by Justin Cooksey</p>
          </header>
        </section>

<!-- Mini Posts -->
<section>
  <div class="mini-posts">
    <!-- Mini Post -->
    <article class="mini-post">
      <header>
        <h3>
          <a href="../blog/2023/dattormm-api.html">Datto RMM API Sites Export</a>
        </h3>
        <time
          class="published"
          datetime="2023-05-29"
          >May 29, 2023</time
        >
        <a href="#" class="author"
          ><img src="../theme/images/avatar.jpg" alt=""
        /></a>
      </header>
      <a href="../blog/2023/dattormm-api.html" class="image"
        ><img src="images/dattormm.png" alt=""
      /></a>
    </article>
    <!-- Mini Post -->
    <article class="mini-post">
      <header>
        <h3>
          <a href="../blog/2021/2021-03-04-windows-server-dhcp-conversion-to-cisco-cli.html">Windows Server DHCP conversion to Cisco CLI</a>
        </h3>
        <time
          class="published"
          datetime="2021-03-04"
          >Mar 4, 2021</time
        >
        <a href="#" class="author"
          ><img src="../theme/images/avatar.jpg" alt=""
        /></a>
      </header>
      <a href="../blog/2021/2021-03-04-windows-server-dhcp-conversion-to-cisco-cli.html" class="image"
        ><img src="images/dhcp.jpg" alt=""
      /></a>
    </article>
  </div>
</section>        <!-- Footer -->
        <section id="footer">
          <ul class="icons">
            <li>
              <a href="https://twitter.com/jscooksey" class="icon brands fa-twitter">
                <span class="label">Twitter</span>
              </a>
            </li>
            <li>
              <a href="https://dev.to/jscooksey" class="icon brands fa-dev">
                <span class="label">DEV</span>
              </a>
            </li>
            <li>
              <a href="https://fosstodon.org/@jscooksey" class="icon brands fa-mastodon">
                <span class="label">Mastodon</span>
              </a>
            </li>
            <li>
              <a href="https://github.com/jscooksey" class="icon brands fa-github">
                <span class="label">GitHub</span>
              </a>
            </li>
          </ul>
          <p class="copyright">
            &copy; Untitled. Design: <a href="http://html5up.net">HTML5 UP</a>.
            Images: <a href="http://unsplash.com">Unsplash</a>.
          </p>
        </section>
      </section>
    </div>

    <!-- Scripts -->
    <script src="../theme/js/jquery.min.js"></script>
    <script src="../theme/js/browser.min.js"></script>
    <script src="../theme/js/breakpoints.min.js"></script>
    <script src="../theme/js/util.js"></script>
    <script src="../theme/js/main.js"></script>
  </body>
</html>